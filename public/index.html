<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <link rel="stylesheet" href="css/style.css" />
  <link rel="stylesheet" href="css/inicio.css">
  <link rel="icon" href="img/logo-wind.svg" class="icon-wind">
  <title>Aurum Joyer칤a | Inicio</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Archivo+Black&family=Montserrat:ital,wght@0,100..900;1,100..900&family=Roboto+Condensed:ital,wght@0,100..900;1,100..900&family=Winky+Rough:ital,wght@0,300..900;1,300..900&display=swap" rel="stylesheet">
  <script defer src="js/api.js"></script>
  <script defer src="js/cargar_destacados.js"></script>
  <script defer src="js/carrito.js"></script>
  <script defer src="js/menu.js"></script>
  <script defer src="js/carrito_global.js"></script>
  <script defer src="js/buscar.js"></script>
</head>
<body>

<header class="navbar">
  <div class="top-bar">
    <div class="logo">
      <a href="index.html"><img src="img/logo.svg" alt="Logo Aurum" class="logo-img"></a>
    </div>

    <div class="menu-bottom-row"> 
      <div class="menu-hamburguesa" id="menuToggle">
        <span></span>
        <span></span>
        <span></span>
      </div>

      <div class="search-container">
        <input type="text" class="search-input" id="searchInput" placeholder="Buscar...">
        <button class="search-btn" id="searchBtn">
          <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="none" stroke="black" stroke-width="2" viewBox="0 0 24 24">
            <circle cx="11" cy="11" r="8"/>
            <line x1="21" y1="21" x2="16.65" y2="16.65"/>
          </svg>
        </button>
        <div class="search-results" id="searchResults"></div>
      </div>

      <div class="icons">
  <!-- 칈cono de usuario/login -->
  <a href="html/login.html" id="userIcon">
    <svg xmlns="http://www.w3.org/2000/svg" width="26" height="26" fill="none" stroke="black" stroke-width="2" viewBox="0 0 24 24">
      <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/>
      <circle cx="12" cy="7" r="4"/>
    </svg>
  </a>
  
  <!-- 칈cono de carrito -->
  <a href="html/carrito.html">
    <svg xmlns="http://www.w3.org/2000/svg" width="26" height="26" fill="none" stroke="black" stroke-width="2" viewBox="0 0 24 24">
      <circle cx="9" cy="21" r="1"/>
      <circle cx="20" cy="21" r="1"/>
      <path d="M1 1h4l2.6 13.5a1 1 0 0 0 1 .8h9.7a1 1 0 0 0 1-.8L23 6H6"/>
    </svg>
  </a>
</div>
    </div> 
  </div>

  <nav class="menu-mobile" id="menuMobile">
    <ul>
      <li><a href="html/categorias/anillos.html">Anillos</a></li>
      <li><a href="html/categorias/pulseras.html">Pulseras</a></li>
      <li><a href="html/categorias/cadenas.html">Cadenas</a></li>
      <li><a href="html/categorias/aretes.html">Aretes</a></li>
      <li><a href="html/categorias/tobilleras.html">Tobilleras</a></li>
      <li><a href="html/categorias/more-products.html">M치s productos</a></li>
    </ul>
  </nav>

  <nav class="menu-categorias">
    <ul>
      <li><a href="html/categorias/anillos.html">Anillos</a></li>
      <li><a href="html/categorias/pulseras.html">Pulseras</a></li>
      <li><a href="html/categorias/cadenas.html">Cadenas</a></li>
      <li><a href="html/categorias/aretes.html">Aretes</a></li>
      <li><a href="html/categorias/tobilleras.html">Tobilleras</a></li>
      <li><a href="html/categorias/more-products.html">M치s productos</a></li>
    </ul>
  </nav>
</header>

<!-- CARRUSEL -->
<!-- Reemplaza la secci칩n del carrusel en index.html -->
<section class="carrusel" id="carrusel">
  <div class="slides">
    <!-- Las im치genes se cargar치n din치micamente -->
  </div>

  <div class="dots">
    <!-- Los dots se generar치n din치micamente -->
  </div>
</section>

<!-- PRODUCTOS DESTACADOS -->
<section class="productos-destacados">
  <h2>Productos destacados</h2>
  <div class="productos-grid">
    <!-- Los productos se cargan aqu칤 con JavaScript -->
  </div>
</section>

<!-- COLECCIONES DESTACADAS -->
<section class="colecciones-destacadas">
  <h2>Nuestras colecciones</h2>
  <div class="colecciones-grid">

    <a href="html/categorias/anillos.html" class="coleccion-card">
      <img src="img/oro2anillo.jpg" alt="Anillos" loading="lazy">
      <h3>Anillos</h3>
      <span class="btn-ver-mas">Ver colecci칩n</span>
    </a>

    <a href="html/categorias/pulseras.html" class="coleccion-card">
      <img src="img/PULSERA BALI LAMINADO.jpg" alt="Pulseras" loading="lazy">
      <h3>Pulseras</h3>
      <span class="btn-ver-mas">Ver colecci칩n</span>
    </a>

    <a href="html/categorias/cadenas.html" class="coleccion-card">
      <img src="img/CADENAS TIPOS VARIAS.jpg" alt="Cadenas" loading="lazy">
      <h3>Cadenas</h3>
      <span class="btn-ver-mas">Ver colecci칩n</span>
    </a>

    <a href="html/categorias/aretes.html" class="coleccion-card">
      <img src="img/TOPOS CIRCON VERDE.jpg" alt="Aretes" loading="lazy">
      <h3>Aretes</h3>
      <span class="btn-ver-mas">Ver colecci칩n</span>
    </a>

    <a href="html/categorias/tobilleras.html" class="coleccion-card">
      <img src="img/TOBILLERA 4.png" alt="Tobilleras" loading="lazy">
      <h3>Tobilleras</h3>
      <span class="btn-ver-mas">Ver colecci칩n</span>
    </a>

    <a href="html/categorias/more-products.html" class="coleccion-card">
      <img src="img/DIJE BOLSA DE DINEROS.webp" alt="M치s productos" loading="lazy">
      <h3>M치s productos</h3>
      <span class="btn-ver-mas">Ver colecci칩n</span>
    </a>

  </div>
</section>

<!-- FOOTER -->
<footer class="footer">
  <div class="footer-container">
    <div class="footer-section logo-section">
      <img src="img/logo.svg" class="logo-img" alt="Aurum Joyer칤a" />
    </div>

    <div class="footer-section">
      <h4>Enlaces</h4>
      <ul>
        <li><a href="index.html">Inicio</a></li>
        <li><a href="html/categorias/pulseras.html">Pulseras</a></li>
        <li><a href="html/categorias/anillos.html">Anillos</a></li>
        <li><a href="html/categorias/cadenas.html">Cadenas</a></li>
        <li><a href="html/categorias/aretes.html">Aretes</a></li>
      </ul>
    </div>

    <div class="footer-section">
      <h4>Contacto</h4>
      <ul>
        <li><span>游늸 Medell칤n, Colombia</span></li>
        <li><span>游 +57 321 779 8612</span></li>
        <li><span>九괦잺 aurumjoyeriak@gmail.com</span></li>
      </ul>
    </div>

    <div class="footer-section">
      <h4>S칤guenos</h4>
      <div class="footer-socials">
        <a href="https://www.instagram.com/aurum.18k_joyeria/" target="_blank" rel="noopener noreferrer">
          <img src="img/instagram.svg" alt="Instagram">
        </a>
      </div>
    </div>
  </div>

  <div class="footer-bottom">
    <p>&copy; 2025 Aurum Joyer칤a. Todos los derechos reservados.</p>
  </div>
</footer>

<!-- BOT칍N FLOTANTE WHATSAPP -->
<a href="https://wa.me/573217798612" class="whatsapp-float" target="_blank" aria-label="Chat en WhatsApp" rel="noopener noreferrer">
  <img src="img/whatsapp-svgrepo-com.svg" alt="WhatsApp" />
</a>

<!-- SCRIPTS -->
<script>
document.addEventListener('DOMContentLoaded', async () => {
  await cargarCarruselDinamico();
});

async function cargarCarruselDinamico() {
  const slidesContainer = document.querySelector('.slides');
  const dotsContainer = document.querySelector('.dots');
  
  try {
    // Obtener im치genes activas del carrusel ordenadas
    const items = await carruselAPI.getAll(true);
    
    if (items.length === 0) {
      // Si no hay im치genes, usar las predeterminadas
      usarCarruselPredeterminado();
      return;
    }
    
    // Limpiar contenedores
    slidesContainer.innerHTML = '';
    dotsContainer.innerHTML = '';
    
    // Crear slides din치micos
    items.forEach((item, index) => {
      // Crear slide
      const slide = document.createElement('div');
      slide.className = `slide ${index === 0 ? 'active' : ''}`;
      slide.style.backgroundImage = `url('${item.imagen_url}')`;
      slidesContainer.appendChild(slide);
      
      // Crear dot
      const dot = document.createElement('span');
      dot.className = `dot ${index === 0 ? 'active' : ''}`;
      dot.dataset.index = index;
      dotsContainer.appendChild(dot);
    });
    
    // Inicializar funcionalidad del carrusel
    inicializarCarrusel();
    
  } catch (error) {
    console.error('Error cargando carrusel:', error);
    usarCarruselPredeterminado();
  }
}

function usarCarruselPredeterminado() {
  const slidesContainer = document.querySelector('.slides');
  const dotsContainer = document.querySelector('.dots');
  
  slidesContainer.innerHTML = `
    <div class="slide active" style="background-image: url('img/oro18k.png');"></div>
    <div class="slide" style="background-image: url('img/anillos.png');"></div>
    <div class="slide" style="background-image: url('img/carru_puls.png');"></div>
  `;
  
  dotsContainer.innerHTML = `
    <span class="dot active" data-index="0"></span>
    <span class="dot" data-index="1"></span>
    <span class="dot" data-index="2"></span>
  `;
  
  inicializarCarrusel();
}

function inicializarCarrusel() {
  const slides = document.querySelectorAll('.slide');
  const dots = document.querySelectorAll('.dot');
  let currentSlide = 0;
  const totalSlides = slides.length;
  
  if (totalSlides === 0) return;

  function showSlide(index) {
    if (index < 0) index = totalSlides - 1;
    if (index >= totalSlides) index = 0;

    document.querySelector('.slides').style.transform = `translateX(-${index * 100}%)`;

    dots.forEach(dot => dot.classList.remove('active'));
    if (dots[index]) dots[index].classList.add('active');

    currentSlide = index;
  }

  // Event listeners para dots
  dots.forEach(dot => {
    dot.addEventListener('click', () => showSlide(parseInt(dot.dataset.index)));
  });

  // Autoplay
  let autoplayInterval = setInterval(() => {
    showSlide(currentSlide + 1);
  }, 6000);

  // Pausar/reanudar autoplay
  const carruselElement = document.querySelector('.carrusel');
  carruselElement.addEventListener('mouseenter', () => clearInterval(autoplayInterval));
  carruselElement.addEventListener('mouseleave', () => {
    autoplayInterval = setInterval(() => showSlide(currentSlide + 1), 6000);
  });

  // Navegaci칩n con teclado
  document.addEventListener('keydown', (e) => {
    if (e.key === 'ArrowLeft') {
      clearInterval(autoplayInterval);
      showSlide(currentSlide - 1);
    } else if (e.key === 'ArrowRight') {
      clearInterval(autoplayInterval);
      showSlide(currentSlide + 1);
    }
  });
}
</script>

<script src="js/verification-banner.js"></script>
<script src="js/admin-panel-button.js"></script>

<script>
  // Actualizar 칤cono de usuario seg칰n estado de login
  document.addEventListener('DOMContentLoaded', () => {
    const userIcon = document.getElementById('userIcon');
    if (!userIcon) return;
    
    const user = getCurrentUser ? getCurrentUser() : null;
    
    if (user) {
      // Usuario logueado - SIEMPRE ir al perfil
      userIcon.innerHTML = `
        <svg xmlns="http://www.w3.org/2000/svg" width="26" height="26" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
          <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/>
          <circle cx="12" cy="7" r="4"/>
        </svg>
      `;
      userIcon.title = `Mi perfil (${user.nombre})`;
      userIcon.href = 'html/perfil.html';
    } else {
      // Usuario NO logueado
      userIcon.title = 'Iniciar sesi칩n';
      userIcon.href = 'html/login.html';
    }
  });
</script>

</body>
</html>